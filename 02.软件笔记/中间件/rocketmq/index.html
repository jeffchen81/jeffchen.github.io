



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="http://www.initcivi.com/02.软件笔记/中间件/rocketmq/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>RocketMQ 分布式MQ和流平台 - 初始文明路</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.3020aac5.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#rocketmq-mq" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://www.initcivi.com" title="初始文明路" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              初始文明路
            </span>
            <span class="md-header-nav__topic">
              RocketMQ 分布式MQ和流平台
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://www.initcivi.com" title="初始文明路" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    初始文明路
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="首页" class="md-nav__link">
      首页
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      01.参考手册
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        01.参考手册
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../01.参考手册/markdown/" title="Markdown语法" class="md-nav__link">
      Markdown语法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../01.参考手册/svn/" title="SVN 版本管理" class="md-nav__link">
      SVN 版本管理
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      02.软件笔记
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        02.软件笔记
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../mkdocs/" title="MkDocs 静态网页生成" class="md-nav__link">
      MkDocs 静态网页生成
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Js库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Js库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../js库/iview-admin/" title="基于Vue的后台管理系统前端UI方案" class="md-nav__link">
      基于Vue的后台管理系统前端UI方案
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Jvm系
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Jvm系
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../jvm系/jvm内存机制和垃圾回收gc/" title="JVM内存机制和垃圾回收GC" class="md-nav__link">
      JVM内存机制和垃圾回收GC
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Linux工具
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Linux工具
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux工具/mutt/" title="Mutt 命令行邮件客户端" class="md-nav__link">
      Mutt 命令行邮件客户端
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux工具/ops_bash/" title="常用运维命令" class="md-nav__link">
      常用运维命令
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux工具/supervisor/" title="supervisord后台进程管理" class="md-nav__link">
      supervisord后台进程管理
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Py库
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Py库
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../py库/spiff_workflow/" title="SpiffWorkflow 工作流引擎" class="md-nav__link">
      SpiffWorkflow 工作流引擎
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6" checked>
    
    <label class="md-nav__link" for="nav-3-6">
      中间件
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        中间件
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../nginx/" title="Nginx 反向代理Web服务器" class="md-nav__link">
      Nginx 反向代理Web服务器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rabbitmq/" title="RabbitMQ消息中间件" class="md-nav__link">
      RabbitMQ消息中间件
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        RocketMQ 分布式MQ和流平台
      </label>
    
    <a href="./" title="RocketMQ 分布式MQ和流平台" class="md-nav__link md-nav__link--active">
      RocketMQ 分布式MQ和流平台
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="简介" class="md-nav__link">
    简介
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" title="安装（docker版）" class="md-nav__link">
    安装（docker版）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="核心" class="md-nav__link">
    核心
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="架构图" class="md-nav__link">
    架构图
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli" title="使用（CLI）" class="md-nav__link">
    使用（CLI）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="参考" class="md-nav__link">
    参考
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-7" type="checkbox" id="nav-3-7">
    
    <label class="md-nav__link" for="nav-3-7">
      大数据
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-7">
        大数据
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../大数据/cdh_install/" title="Cloudera Distribution Hadoop（CDH）安装教程" class="md-nav__link">
      Cloudera Distribution Hadoop（CDH）安装教程
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      03.运维研发
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        03.运维研发
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/" title="简介" class="md-nav__link">
      简介
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/alarm/" title="告警服务" class="md-nav__link">
      告警服务
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/env_build/" title="Env build" class="md-nav__link">
      Env build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/monitor/" title="监控体系" class="md-nav__link">
      监控体系
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/ops_interview/" title="常见运维面试题目" class="md-nav__link">
      常见运维面试题目
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      CICD
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        CICD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/CICD/cmdbuild/" title="CMDBuild配置管理平台" class="md-nav__link">
      CMDBuild配置管理平台
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/CICD/gitlab/" title="Gitlab版本管理" class="md-nav__link">
      Gitlab版本管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/CICD/redmine/" title="Redmine需求管理平台" class="md-nav__link">
      Redmine需求管理平台
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      批量部署
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        批量部署
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/批量部署/ansible/" title="Ansible自动化部署工具" class="md-nav__link">
      Ansible自动化部署工具
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      监控告警
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        监控告警
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../03.运维研发/监控告警/grafana/" title="Grafana可视化监控仪表盘" class="md-nav__link">
      Grafana可视化监控仪表盘
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      04.经济金融
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        04.经济金融
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      基金
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        基金
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../04.经济金融/基金/" title="证券投资基金" class="md-nav__link">
      证券投资基金
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../04.经济金融/基金/行业概述/" title="行业概述" class="md-nav__link">
      行业概述
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      05.开源项目
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        05.开源项目
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1" type="checkbox" id="nav-6-1">
    
    <label class="md-nav__link" for="nav-6-1">
      Stock starer股票盯盘
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-1">
        Stock starer股票盯盘
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../05.开源项目/stock-starer股票盯盘/readme/" title="Stock Starer股票盯盘" class="md-nav__link">
      Stock Starer股票盯盘
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="简介" class="md-nav__link">
    简介
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" title="安装（docker版）" class="md-nav__link">
    安装（docker版）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="核心" class="md-nav__link">
    核心
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="架构图" class="md-nav__link">
    架构图
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli" title="使用（CLI）" class="md-nav__link">
    使用（CLI）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="参考" class="md-nav__link">
    参考
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="rocketmq-mq">RocketMQ 分布式MQ和流平台</h1>
<h2 id="_1">简介</h2>
<ul>
<li>开源，Apache2.0</li>
<li>Pull模式</li>
<li>低延时，亿级</li>
<li>高可靠，磁盘数据固化</li>
<li>易扩容</li>
<li>支持Scheduled</li>
<li>支持广播</li>
<li>支持条件过滤</li>
</ul>
<h2 id="docker">安装（docker版）</h2>
<p><strong>安装需求</strong>：</p>
<ul>
<li>64位，类Unix系统</li>
<li>JDK 1.8以上</li>
<li>Broker节点需要4G以上硬盘</li>
</ul>
<pre><code>git clone https://github.com/apache/rocketmq-externals.git
cd rocketmq-externals/rocketmq-docker/4.4.0
./play-docker.sh  # 编译并启动镜像，非常简单人性化
# 测试生产者
docker exec -ti rmqbroker sh ./tools.sh org.apache.rocketmq.example.quickstart.Producer
# 测试消费
docker exec -ti rmqbroker sh ./tools.sh org.apache.rocketmq.example.quickstart.Consumer
</code></pre>

<p><strong>启动参数</strong>：</p>
<ul>
<li><code>-e "MAX_POSSIBLE_HEAP=100000000"</code>指定jvm内存heap</li>
</ul>
<p>运行效果:
<img alt="运行效果" src="../rocketmq.png" /></p>
<p><strong>优雅关机</strong>：</p>
<ul>
<li>
<p><code>docker exec -ti rmqbroker sh ./mqshutdown broker</code>先关broker</p>
<blockquote>
<pre><code>The mqbroker(28) is running...
Send shutdown request to mqbroker(28) OK
</code></pre>
</blockquote>
</li>
<li>
<p><code>docker exec -ti rmqnamesrv sh ./mqshutdown namesrv</code>再关namesrv</p>
<blockquote>
<pre><code>The mqnamesrv(27) is running...
Send shutdown request to mqnamesrv(27) OK
</code></pre>
</blockquote>
</li>
</ul>
<h2 id="_2">核心</h2>
<h3 id="_3">架构图</h3>
<p><img alt="架构" src="../rmq-basic-arc.png" /></p>
<h2 id="cli">使用（CLI）</h2>
<p>用法：<code>bin/mqadmin &lt;命令&gt; &lt;参数&gt;</code></p>
<p>命令如下：</p>
<blockquote>
<pre><code>updateTopic          Update or create topic
deleteTopic          Delete topic from broker and NameServer.
updateSubGroup       Update or create subscription group
deleteSubGroup       Delete subscription group from broker.
updateBrokerConfig   Update broker's config
updateTopicPerm      Update topic perm
topicRoute           Examine topic route info
topicStatus          Examine topic Status info
topicClusterList     get cluster info for topic
brokerStatus         Fetch broker runtime status data
queryMsgById         Query Message by Id
queryMsgByKey        Query Message by Key
queryMsgByUniqueKey  Query Message by Unique key
queryMsgByOffset     Query Message by offset
printMsg             Print Message Detail
printMsgByQueue      Print Message Detail
sendMsgStatus        send msg to broker.
brokerConsumeStats   Fetch broker consume stats data
producerConnection   Query producer's socket connection and client version
consumerConnection   Query consumer's socket connection, client version and subscription
consumerProgress     Query consumers's progress, speed
consumerStatus       Query consumer's internal data structure
cloneGroupOffset     clone offset from other group.
clusterList          List all of clusters
topicList            Fetch all topic list from name server
updateKvConfig       Create or update KV config.
deleteKvConfig       Delete KV config.
wipeWritePerm        Wipe write perm of broker in all name server
resetOffsetByTime    Reset consumer offset by timestamp(without client restart).
updateOrderConf      Create or update or delete order conf
cleanExpiredCQ       Clean expired ConsumeQueue on broker.
cleanUnusedTopic     Clean unused topic on broker.
startMonitoring      Start Monitoring
statsAll             Topic and Consumer tps stats
allocateMQ           Allocate MQ
checkMsgSendRT       check message send response time
clusterRT            List All clusters Message Send RT
getNamesrvConfig     Get configs of name server.
updateNamesrvConfig  Update configs of name server.
getBrokerConfig      Get broker config by cluster or special broker!
queryCq              Query cq command.
sendMessage          Send a message
consumeMessage       Consume message
</code></pre>
</blockquote>
<h2 id="_4">参考</h2>
<ul>
<li><a href="https://rocketmq.apache.org/">官网</a></li>
<li><a href="https://github.com/apache/rocketmq/">github源码</a></li>
<li><a href="https://github.com/apache/rocketmq-externals/tree/master/rocketmq-docker">官方docker</a></li>
<li><a href="https://github.com/apache/rocketmq-client-python">官方Python客户端</a></li>
</ul>
                
                  
                
              
              
                


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "http://www.initcivi.com/02.软件笔记/中间件/rocketmq/";
      this.page.identifier =
        "/02.软件笔记/中间件/rocketmq/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//initcivi.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../rabbitmq/" title="RabbitMQ消息中间件" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                RabbitMQ消息中间件
              </span>
            </div>
          </a>
        
        
          <a href="../../大数据/cdh_install/" title="Cloudera Distribution Hadoop（CDH）安装教程" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Cloudera Distribution Hadoop（CDH）安装教程
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.267712eb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>